import{j as r}from"./plugins-q0mUWLr-.js";import{r as p}from"./ace-T5rmW5Lp.js";import{M as x,T as $}from"./index-G1RmKFi7.js";import{e as E}from"./exportMarkdown-FI0QSQ96.js";const N=i=>{const o=["January","February","March","April","May","June","July","August","September","October","November","December"],l=i.getDate(),d=o[i.getMonth()],u=i.getFullYear(),h=`${l} ${d}, ${u}`,a=i.getHours(),c=i.getMinutes(),f=a>=12?"PM":"AM";return`${`${a%12||12}:${c.toString().padStart(2,"0")} ${f}`} - ${h}`},C=({closeList:i})=>{const[o,l]=p.useState([]),{handleChange:d,filenameChange:u,timestampChange:h}=p.useContext(x),{theme:a}=p.useContext($);p.useEffect(()=>{const e=Object.entries(localStorage).filter(([t])=>t.startsWith("Entry: ")).map(([t,s])=>({filename:t.replace("Entry: ","").split(" - ")[0],markdown:s,timestamp:new Date(t.replace("Entry: ","").split(" - ")[1])})),n=Object.values(e.reduce((t,{filename:s,markdown:m,timestamp:g})=>(t[s]||(t[s]=[]),t[s].push({filename:s,markdown:m,timestamp:g}),t),{})).map(t=>(t.sort((s,m)=>m.timestamp.getTime()-s.timestamp.getTime()),{entryName:t[0].filename,entries:t}));n.sort((t,s)=>s.entries[0].timestamp.getTime()-t.entries[0].timestamp.getTime()),l(n)},[i]);const c=e=>{u(e.filename),d(e.markdown),h(e.timestamp),i()},f=e=>{const{timeZone:n}=Intl.DateTimeFormat().resolvedOptions(),t=e.timestamp.toLocaleString("en-US",{timeZone:n});localStorage.removeItem(`Entry: ${e.filename} - ${t}`);const s=o.map(m=>m.entryName===e.filename?{...m,entries:m.entries.filter(g=>g.timestamp!==e.timestamp)}:m);l(s)};return r.jsxs("div",{className:`entry-list ${a}`,children:[r.jsx("h2",{className:`entry-list-heading ${a}`,children:"Saved Entries"}),r.jsx("div",{className:`new entry-button ${a}`,title:"Open a new entry in the editor",onClick:()=>c({filename:"untitled",markdown:"",timestamp:new Date}),children:"New Entry"},"New Entry"),o.length==0?r.jsx("div",{className:`entry-title ${a}`,children:"No entry"}):o.map(e=>e.entries.length>0&&r.jsxs("div",{children:[r.jsx("div",{className:`entry-title ${a}`,children:e.entryName.length>50?e.entryName.substring(0,70)+"...":e.entryName}),e.entries.map(n=>r.jsxs("div",{className:"entry",children:[r.jsx("br",{}),r.jsx("button",{title:`${n.filename} from ${n.timestamp.toDateString()}`,className:`entry-button ${a}`,onClick:()=>c(n),children:N(n.timestamp)}),r.jsx("button",{title:`Export as ${n.filename}.md`,className:`export-button ${a}`,onClick:()=>E({filename:n.filename,markdown:n.markdown}),children:"Export"}),r.jsx("button",{title:`Delete this version of ${n.filename}`,className:"delete-button",onClick:()=>f(n),children:"Delete"})]},n.timestamp.toString()))]},e.entryName))]})};export{C as default};
//# sourceMappingURL=index-AmydUEcr.js.map
