import{j as e}from"./plugins-zOuqcpMR.js";import{r as i}from"./ace-ERQk7LBk.js";import{T as E,d as g,g as N,e as C,b as w}from"./index-MhRWvM9V.js";import{e as b}from"./exportMarkdown-C0XcNpUB.js";const j=({groupedEntries:c,closeList:h})=>{const{theme:n}=i.useContext(E),{selectedEntries:o,renamingEntries:d,renameEntry:m,handleEntrySelect:x,openEntry:s,deleteEntry:r,startRenaming:p,setNewName:u}=i.useContext(g);return c.map(a=>a.entries.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:`entry-title ${n}`,children:d[a.entryName]?e.jsxs(e.Fragment,{children:[e.jsx("input",{className:`entry-search ${n}`,type:"text",placeholder:a.entryName,onChange:t=>u(t.target.value)}),e.jsx("label",{className:`btn ${n}`,title:"Rename",onClick:()=>m(a.entryName),children:"Rename"},"Rename Entry")]}):a.entryName.length>50?a.entryName.substring(0,70)+"...":a.entryName}),e.jsx("div",{title:"Rename this entry",className:`rename-btn ${n}`,onClick:()=>p(a.entryName),children:">"}),a.entries.map(t=>e.jsxs("div",{className:"entry",children:[e.jsx("br",{}),e.jsxs("label",{title:"Check to preview",className:`checkbox-container ${n}`,children:[e.jsx("input",{type:"checkbox",name:"myCheckbox",checked:o.includes(t),onChange:()=>x(t)}),e.jsx("span",{className:`checkbox-checkmark ${n}`})]}),e.jsxs("button",{title:`${t.filename} from ${t.timestamp.toDateString()}`,className:`entry-button ${n}`,onClick:()=>{s(t),h()},children:[N(t.timestamp)," "]}),e.jsx(C,{title:"Open entry in new tab",to:"entry/"+t.filename+"@"+N(t.timestamp),target:"_blank",children:e.jsx("h3",{children:"[â†—]"})}),e.jsx("button",{title:`Export as ${t.filename}.md`,className:`export-button ${n}`,onClick:()=>b({filename:t.filename,markdown:t.markdown}),children:"Export"}),e.jsx("button",{title:`Export as ${t.filename}.md`,className:`export-button ${n}`,onClick:()=>b({filename:t.filename+"@"+N(t.timestamp),markdown:t.markdown}),children:"@"}),e.jsx("button",{title:`Delete this version of ${t.filename}`,className:"delete-button",onClick:()=>r(t),children:"Delete"})]},t.timestamp.toString()))]},a.entryName))},L=({closeList:c})=>{const[h,n]=i.useState([]),[o,d]=i.useState(!0),[m,x]=i.useState(""),{theme:s}=i.useContext(E),{groupedEntries:r,updateList:p,exportEntries:u,importEntries:a,previewEntries:t,openEntry:k}=i.useContext(g),$=w();return i.useEffect(()=>{p()},[]),i.useEffect(()=>{if(m==="")return n(r);const l=r.filter(f=>f.entryName.toLowerCase().includes(m.toLowerCase()));n(l)},[r,m]),e.jsxs("div",{className:`entry-list ${s}`,children:[e.jsx("h2",{className:`entry-list-heading ${s}`,children:"Saved Entries"}),e.jsxs("div",{className:"header-button-container",children:[e.jsx("button",{className:`entry-button ${s}`,title:"Open a new entry in the editor",onClick:()=>{k({filename:"untitled",markdown:"",timestamp:new Date}),c()},children:"New Entry"},"New Entry"),e.jsx("button",{className:`entry-button ${s}`,title:"Mark two entries to open a preview",onClick:()=>{const l=t();l&&$(`/mdwrite/previews/p1/${l[0]}/p2/${l[1]}`)},children:"Preview"},"Preview")]}),e.jsxs("div",{className:"header-button-container",children:[e.jsxs("label",{className:`btn ${s}`,title:"Import entries into the browser",children:[e.jsx("input",{type:"file",onChange:a}),"Import Entries"]},"Import Entries"),e.jsx("label",{className:`btn ${s}`,title:`Click to ${o?"reveal":"hide"} the search bar`,onClick:()=>d(!o),children:"Search"}),e.jsx("label",{className:`btn ${s}`,title:"Export entries into a file",onClick:u,children:"Export Entries"},"Export Entries")]}),!o&&e.jsxs(e.Fragment,{children:[e.jsx("input",{className:`entry-search ${s}`,type:"text",placeholder:"Search",onChange:l=>x(l.target.value)}),h.length===0?e.jsx("h3",{className:`search-heading ${s}`,children:"No matches"}):e.jsx(j,{groupedEntries:h,closeList:c})]}),o&&(r.length===0?e.jsx("h3",{className:`search-heading ${s}`,children:"No entry"}):e.jsx(j,{groupedEntries:r,closeList:c}))]})};export{L as default};
//# sourceMappingURL=index-4HtYeWPI.js.map
